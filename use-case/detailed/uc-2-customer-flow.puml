@startuml "UC-2: Customer Shopping Flow"
' Layout improvement for a clear, top-to-bottom flow

!theme plain

actor Customer

rectangle "Rill System" {
  usecase "Browse & Search Products" as UC4
  usecase "Manage Shopping Cart" as UC7
  usecase "Place Order" as UC8
  usecase "Cancel Order" as UC11
  usecase "Review Product" as UC12
}

' Arrange use cases in a logical top-to-bottom flow
Customer --> UC4
UC4 -down-> UC7
UC7 -down-> UC8
UC8 -left-> UC11 : <<extend>>\n(If order is pending)
UC8 -down-> UC12

' Breakdown of Manage Shopping Cart
UC7 .> (Add Item) : <<include>>
UC7 .> (Update Quantity) : <<include>>
UC7 .> (Remove Item) : <<include>>

' Breakdown of Place Order
UC8 .> (Select Shipping Address) : <<include>>
UC8 .> (Perform Stock Check) : <<include>>
UC8 .> (Clear Cart) : <<include>>

' A customer can only review a product after the order is delivered
(UC12) .> (Verify Order Status is 'Delivered') : <<include>>

note "All use cases require authentication" as N1
UC7 .. N1
UC8 .. N1
UC11 .. N1
UC12 .. N1

@enduml
