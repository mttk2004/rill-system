@startuml "UC-3: Admin Functions - Final Detailed Layout"
!theme plain

actor Admin

' --- 1. ĐỊNH NGHĨA CÁC PHẦN TỬ ---
rectangle "Rill System" {
  package "Catalog Management" {
    usecase "Manage Products" as UC_Products
    usecase "Manage Artists" as UC_Artists
  }
  package "Order Fulfillment" {
    usecase "Process Order" as UC_Process
    usecase "Update Shipping Status" as UC_UpdateStatus
    usecase "Cancel Order" as UC_Cancel
  }
  package "Customer Information" {
    usecase "View Customer Info" as UC_ViewInfo
  }
}

' Use case con cho Catalog Management
usecase "(Add Product)" as AddProd
usecase "(Edit Product)" as EditProd
usecase "(Delete Product)" as DelProd
usecase "(Add Artist)" as AddArtist
usecase "(Edit Artist)" as EditArtist
usecase "(Delete Artist)" as DelArtist

' Use case con cho Customer Information
usecase "(View Personal Info)" as ViewProfile
usecase "(View Order History)" as ViewHistory

' --- 2. SẮP XẾP BỐ CỤC BẰNG LIÊN KẾT ẨN ---
UC_Artists -[hidden]right- UC_Process
UC_Cancel -[hidden]right- UC_ViewInfo

' Sắp xếp các use case con thành các cột riêng biệt bên phải
UC_Products -[hidden]right- AddProd
AddProd -[hidden]down- EditProd
EditProd -[hidden]down- DelProd
DelProd -[hidden]down- AddArtist
AddArtist -[hidden]down- EditArtist
EditArtist -[hidden]down- DelArtist

UC_ViewInfo -[hidden]right- ViewProfile
ViewProfile -[hidden]down- ViewHistory


' --- 3. VẼ CÁC MỐI QUAN HỆ HỢP LỆ ---
Admin --> UC_Products
Admin --> UC_Artists
Admin --> UC_Process
Admin --> UC_Cancel
' **SỬA LỖI TẠI ĐÂY: Xóa comment khỏi dòng này**
Admin --> UC_ViewInfo

UC_Process .right.> UC_UpdateStatus : <<extend>>

' Quan hệ <<include>> cho Catalog
UC_Products .right.> AddProd   : <<include>>
UC_Products .right.> EditProd  : <<include>>
UC_Products .right.> DelProd   : <<include>>
UC_Artists .right.> AddArtist : <<include>>
UC_Artists .right.> EditArtist: <<include>>
UC_Artists .right.> DelArtist : <<include>>

' Quan hệ <<include>> cho Customer Info
UC_ViewInfo .right.> ViewProfile : <<include>>
UC_ViewInfo .right.> ViewHistory : <<include>>


' --- 4. GHI CHÚ ---
note "All use cases require admin authentication" as AuthNote
(Catalog Management) .. AuthNote
(Order Fulfillment) .. AuthNote
(Customer Information) .. AuthNote

@enduml
