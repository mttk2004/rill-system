@startuml "UC-3: Admin Functions - Final Clean Layout"
!theme plain

actor Admin

' --- 1. ĐỊNH NGHĨA CÁC PHẦN TỬ ---
rectangle "Rill System" {
  package "Catalog Management" {
    usecase "Manage Products" as UC_Products
    usecase "Manage Artists" as UC_Artists
  }
  package "Order Fulfillment" {
    usecase "Process Order" as UC_Process
    usecase "Update Shipping Status" as UC_UpdateStatus
    usecase "Cancel Order" as UC_Cancel
  }
  package "User Management" {
    usecase "View Customer Info" as UC_Users
  }
}

usecase "(Add Product)" as AddProd
usecase "(Edit Product)" as EditProd
usecase "(Delete Product)" as DelProd
usecase "(Add Artist)" as AddArtist
usecase "(Edit Artist)" as EditArtist
usecase "(Delete Artist)" as DelArtist

' --- 2. SẮP XẾP BỐ CỤC BẰNG LIÊN KẾT ẨN (SỬA LỖI TẠI ĐÂY) ---
' Thay vì nhóm, ta nối phần tử cuối của package trước với phần tử đầu của package sau
UC_Artists -[hidden]right- UC_Process
UC_Cancel -[hidden]right- UC_Users

' Sắp xếp các use case con thành cột bên phải
UC_Products -[hidden]right- AddProd
AddProd -[hidden]down- EditProd
EditProd -[hidden]down- DelProd
DelProd -[hidden]down- AddArtist
AddArtist -[hidden]down- EditArtist
EditArtist -[hidden]down- DelArtist

' --- 3. VẼ CÁC MỐI QUAN HỆ HỢP LỆ ---
Admin --> UC_Products
Admin --> UC_Artists
Admin --> UC_Process
Admin --> UC_Cancel
Admin --> UC_Users

UC_Process .right.> UC_UpdateStatus : <<extend>>

UC_Products .right.> AddProd   : <<include>>
UC_Products .right.> EditProd  : <<include>>
UC_Products .right.> DelProd   : <<include>>
UC_Artists .right.> AddArtist : <<include>>
UC_Artists .right.> EditArtist: <<include>>
UC_Artists .right.> DelArtist : <<include>>

' --- 4. GHI CHÚ ---
note "All use cases require admin authentication" as AuthNote
(Catalog Management) .. AuthNote
(Order Fulfillment) .. AuthNote
(User Management) .. AuthNote

@enduml
